{"version":3,"sources":["components/PostsList.js"],"names":["Post","lazy","baseURL","process","REACT_APP_BASEURL","PostsList","state","posts","noOfPosts","axios","get","then","response","setState","data","reverse","document","querySelector","style","display","catch","err","console","error","className","id","role","this","slice","map","currentPost","key","_id","fallback","post","onClick","Component"],"mappings":"mLAEMA,EAAOC,gBAAK,kBAAM,iCAElBC,EAAUC,mIAAYC,mBAAqB,wBAS3CC,E,kDACF,aAAe,IAAD,8BACV,gBAEKC,MAAQ,CACTC,MAAO,GAEPC,UAAW,GANL,E,qDAUd,WAAqB,IAAD,OAChBC,IACKC,IADL,UACYR,EADZ,mBAEKS,MAAK,SAACC,GAEH,EAAKC,SAAS,CAAEN,MAAOK,EAASE,KAAKC,YAGrCC,SAASC,cAAc,mBAAmBC,MAAMC,QAC5C,UAEPC,OAAM,SAACC,GAAD,OAASC,QAAQC,MAAMF,Q,oBAGtC,WAAU,IAAD,OACL,OACI,yBAAKG,UAAU,cACX,wBAAIC,GAAG,SAAP,eACgB,0BAAMD,UAAU,aAAhB,MAIhB,yBAAKA,UAAU,qBACX,yBAAKA,UAAU,iBAAiBE,KAAK,UACjC,0BAAMF,UAAU,WAAhB,gBAKPG,KAAKrB,MAAMC,MACPqB,MAAM,EAAGD,KAAKrB,MAAME,WACpBqB,KAAI,SAACC,GAAD,OACD,kBAAC,WAAD,CACIC,IAAKD,EAAYE,IACjBC,SApDxB,yBAAKT,UAAU,qBACX,yBAAKA,UAAU,iBAAiBE,KAAK,UACjC,0BAAMF,UAAU,WAAhB,iBAoDgB,kBAACxB,EAAD,CAAMkC,KAAMJ,QAKvBH,KAAKrB,MAAMC,MAAMoB,KAAKrB,MAAME,WACzB,4BACIgB,UAAU,eACVW,QAAS,kBAEL,EAAKtB,SAAS,CACVL,UAAW,EAAKF,MAAME,UAAY,MAL9C,sBAYA,Q,GAjEI4B,aAwET/B","file":"static/js/15.8c544471.chunk.js","sourcesContent":["import React, { Component, lazy, Suspense } from \"react\";\nimport axios from \"axios\";\nconst Post = lazy(() => import(\"./Post\"));\n\nconst baseURL = process.env.REACT_APP_BASEURL || \"http://localhost:5000\";\nconst renderLoader = () => (\n    <div className=\"spinner-container\">\n        <div className=\"spinner-border\" role=\"status\">\n            <span className=\"sr-only\">Loading...</span>\n        </div>\n    </div>\n);\n\nclass PostsList extends Component {\n    constructor() {\n        super();\n\n        this.state = {\n            posts: [],\n            // Set the no of posts to be rendered to 5\n            noOfPosts: 5,\n        };\n    }\n\n    componentDidMount() {\n        axios\n            .get(`${baseURL}/server/posts/`)\n            .then((response) => {\n                // The order of posts is reversed to display the posts in reverse chronological order\n                this.setState({ posts: response.data.reverse() });\n\n                // Remove display of the spinner\n                document.querySelector(\".spinner-border\").style.display =\n                    \"none\";\n            })\n            .catch((err) => console.error(err));\n    }\n\n    render() {\n        return (\n            <div className=\"posts-list\">\n                <h4 id=\"title\">\n                    Latest Posts<span className=\"full-stop\">.</span>\n                </h4>\n\n                {/* A spinner to indicate loading until posts are stored in state */}\n                <div className=\"spinner-container\">\n                    <div className=\"spinner-border\" role=\"status\">\n                        <span className=\"sr-only\">Loading...</span>\n                    </div>\n                </div>\n\n                {/* Display the posts in reverse chronological order */}\n                {this.state.posts\n                    .slice(0, this.state.noOfPosts)\n                    .map((currentPost) => (\n                        <Suspense\n                            key={currentPost._id}\n                            fallback={renderLoader()}\n                        >\n                            <Post post={currentPost} />\n                        </Suspense>\n                    ))}\n\n                {/* To load more posts */}\n                {this.state.posts[this.state.noOfPosts] ? (\n                    <button\n                        className=\"btn btn-link\"\n                        onClick={() =>\n                            // When the button is clicked change the state to reflect the change in the no of posts beoing rendered, which triggers a compnent\n                            this.setState({\n                                noOfPosts: this.state.noOfPosts + 3,\n                            })\n                        }\n                    >\n                        Load More Posts...\n                    </button>\n                ) : (\n                    \"\"\n                )}\n            </div>\n        );\n    }\n}\n\nexport default PostsList;\n"],"sourceRoot":""}